<div class="breadcrumbs"> /
  <a target='_self' ng-href="games/">Games</a> /
  <a target='_self' ng-href="games/recap/{{ game.id }}">Day recap</a> /
  <a target='_self' ng-href="games/{{ game.id }}/box-score/">{{ game.date }} - {{ game.title }}</a> /
  Add Plays
</div>

<div class="page-header">
  <h3 class="accent">
    Add Plays
  </h3>
</div>

<div class="row">
  <div class="col-md-8 col-md-offset-2 score-board">
    <div class="sb-top-team">Good Guys</div>
    <div class="sb-top-team-score">{{ team1_score }}</div>
    <div></div>
    <div class="sb-bottom-team">Bad Guys</div>
    <div class="sb-bottom-team-score">{{ team2_score }}</div>
  </div>
</div>

<div class="row">
  <div id="playeranchor" style="display:block;height:50px;margin-top:-50px;visibility:hidden; col-md-12"></div>
  <div class="col-md-10 col-md-offset-1">
    <div class="embed-responsive embed-responsive-16by9" style="margin:15px 0px;">
      <youtube-video class="embed-responsive-item" video-id="game.youtube_id" player="ytplayer"></youtube-video>
    </div>
  </div>
</div>

<form name="playform" style="margin-bottom: 30px;" ng-submit="create(play)" novalidate>
  <div class="row">
    <div class="col-md-3 col-md-offset-1">
      <div class="form-group col-md-10">
        <label>*Time</label>
        <input type="text" style="width: 100%;" name="timestamp" class="form-control" placeholder="HH:MM:SS or MM:SS" ng-model="play.time" ng-pattern="/^(\d{2}:)?[0-5]\d:[0-5]\d/" required>
        <div ng-show="playform.timestamp.$invalid && playform.timestamp.$touched">
           Required!
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3 col-md-offset-1">
      <div class="form-group col-md-7">
          <label>*Primary Play</label>
          <select required class="form-control" ng-options="o.code as o.name for o in OPTIONS.PRIMARY_PLAY" name='primary_play' ng-model="play.primary_play">
              <option value="">-------</option>
          </select>
          <div ng-show="playform.primary_play.$invalid && playform.primary_play.$touched">
             Required!
          </div>
      </div>
      <div class="form-group col-md-10">
        <label>*Primary Player</label>
        <select required class="form-control" ng-options="o.code as o.name for o in OPTIONS.players" name="primary_player" ng-model="play.primary_player">
            <option value="">-------</option>
        </select>
        <div ng-show="playform.primary_player.$invalid && playform.primary_player.$touched">
           Required!
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group col-md-7">
        <label>Secondary Play</label>
        <select class="form-control" ng-options="o.code as o.name for o in OPTIONS.SECONDARY_PLAY" ng-model="play.secondary_play">
            <option value="">-------</option>
        </select>
      </div>
      <div class="form-group col-md-10">
        <label ng-if="play.secondary_play">*Secondary Player</label>
        <select ng-if="play.secondary_play" class="form-control" ng-options="o.code as o.name for o in OPTIONS.players" name="secondary_player" ng-model="play.secondary_player" ng-required="play.secondary_play">
            <option value="">-------</option>
        </select>
        <div ng-show="playform.secondary_player.$invalid && playform.secondary_player.$touched">
           Required!
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group col-md-7">
        <label>Assist Play</label>
        <select class="form-control" ng-options="o.code as o.name for o in OPTIONS.ASSIST_PLAY" ng-model="play.assist">
            <option value="">-------</option>
        </select>
      </div>
      <div class="form-group col-md-8">
        <label ng-if="play.assist">*Assist Player</label>
        <select ng-if="play.assist" class="form-control" ng-options="o.code as o.name for o in OPTIONS.players" name="assist_player" ng-model="play.assist_player" ng-required="play.assist">
            <option value="">-------</option>
        </select>
        <div ng-show="playform.assist_player.$invalid && playform.assist_player.$touched">
           Required!
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 col-md-offset-1" style="background: lightgray; border-radius: 10px;">
      <div class="col-md-6" style="padding: 5px 0px 0px 0px">
        <div class="form-group col-md-10">
          <label>Play Rank</label>
          <select class="form-control" ng-options="o.code as o.name for o in OPTIONS.PLAY_RANKS" ng-model="play.top_play_rank">
              <option value="">-------</option>
          </select>
        </div>
        <div class="form-group col-md-12">
          <label>Description</label>
          <input type="text" name="description" class="form-control" ng-model="play.description">
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-12" style="padding: 5px 0px 5px 0px">
          <label>Play Rank</label>
          <select multiple class="form-control" style="height: 95px;" ng-options="o.code as o.name for o in OPTIONS.players" ng-model="play.top_play_players">
              <option value="">-------</option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <button type="submit" class="btn btn-default btn-primary col-md-offset-1" style="margin-top:10px;" ng-disabled="playform.$invalid">Submit</button>
  <div style="display: inline;" ng-bind="message"></div>
</form>

<div name="play" ng-repeat="play in plays" class="row play-item">
  <div class="col-md-10 col-md-offset-1" style="border-bottom: 1px solid black;">
    <button confirmed-click="delete(play.id)" ng-confirm-click="Delete the play?" style="position: absolute; top: 0px; left: 0px; color: white; background-color:red; border: 0px; z-index: 2;">X</button>
    <div class="col-md-3 col-xs-3">
      <a href="#playeranchor" ng-click="$parent.specifiedTime = play.time; ytplayer.stopVideo(); ytplayer.playVideo();" style="cursor:pointer;">{{ play.time }}</a><br>
      {{play.primary_play_display}}<br>
      {{play.primary_player.first_name }} {{play.primary_player.last_name }}
    </div>
    <div class="col-md-3 col-xs-3">
      <br>
      {{play.secondary_play_display}}<br>
      {{play.secondary_player.first_name}} {{play.secondary_player.last_name}}
    </div>
    <div class="col-md-3 col-xs-3">
      <br>
      {{play.assist_display}}<br>
      {{play.assist_player.first_name}} {{play.assist_player.last_name}}
    </div>
    <div class="col-md-3 col-xs-3">
      <br>
      <span ng-show="{{play.top_play_rank.length}} === 3" class="glyphicon glyphicon-star" aria-hidden="true"></span>
      <span ng-show="{{play.top_play_rank.length}} === 4" class="glyphicon glyphicon-cloud" aria-hidden="true"></span>
      <br>
      {{play.description}}
    </div>
  </div>
</div>
